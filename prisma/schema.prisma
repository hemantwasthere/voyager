// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model AllBlocks {
  id     String  @id @default(auto()) @map("_id") @db.ObjectId
  blocks Block[]
}

type Block {
  blockHash        String?
  blockNumber      Int?
  l1DaMode         String?
  l1DataGasPrice   GasPrice?
  l1GasPrice       GasPrice?
  newRoot          String?
  parentHash       String?
  sequencerAddress String?
  starknetVersion  String?
  status           String?

  timestamp       Int?
  allTransactions Transaction[]
}

type GasPrice {
  priceInFri String?
  priceInWei String?
}

type Transaction {
  calldata                  String[]
  feeDataAvailabilityMode   String?
  nonce                     String?
  nonceDataAvailabilityMode String?
  resourceBounds            ResourceBounds?
  signatures                String[]
  tip                       String?
  txHash                    String?
  txType                    String?
  transactionDetails        TransactionDetails?
  developerInfo             DeveloperInfo?
  events                    Event[]
}

type ResourceBounds {
  l1Gas         Gas?
  l2Gas         Gas?
  senderAddress String?
}

type Gas {
  maxAmount       String?
  maxPricePerUnit String?
}

type TransactionDetails {
  blockNumber   Int
  timestamp     Int
  actualFee     String
  maxFee        String
  gasConsumed   String
  senderAddress String
}

type DeveloperInfo {
  unixTimestamp      Int
  nonce              String
  position           Int
  version            String
  executionResources String[]
  calldata           String[]
  signatures         String[]
}

type Event {
  ID    String?
  block Int?
  age   Int?
}
